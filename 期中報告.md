# EDA 的相關算法
EDA翻譯成中文是探索式資料分析，為Exploratory Data Analysis的縮寫，是一種透過**檢視、視覺化、統計工具**這三個手段來達到了解資料、發現異常、分析關聯性的作法。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/7c9cdd02-a631-41dd-891e-c415c7582165)
* 視覺化指可以透過**柱狀圖、散布圖、箱型圖**等，去了解資料的分佈情形（**是否接近常態分佈或均勻分佈**）以及**異常值**（outlier）的發生狀況。
* 統計工具則是可以去找到資料的**最大最小值、眾數、平均數、以及各百分位數的值**，或者是各個數值所**出現的次數**。
* 可大致區分資料的種類為**離散變數、連續變數和其他變數**三種。

## 常用的EDA相關算法和技術

### 描述性統計
   
   描述性統計的資料分為兩種，一種是**集中量數**，用來描述數據的集中程度，另一種是**離散量數**，用來描述離散程度。
* 集中量數: 

  常見的集中量數為眾數、中位數、平均數，用來觀察資料是否集中，此外，還可透過這三個數討論為常態分佈還是偏態分布。
  * 眾數:數據中出現次數最多的數值。
  * 中位數:數據中排序最中間的數值。
  * 平均數:數據加總除以總個數的數值。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/57afa879-0ffa-467f-bd9b-5a4cd519dc20)
    * 負偏態: 左右不對稱，眾數偏右，眾數>中位數>平均數。
    * 常態: 左右對稱，眾數在中間，眾數=中位數=平均數。
    * 正偏態: 左右不對稱，眾數偏左，眾數<中位數<平均數。
* 離散量數: 

  常見的離散量數有最大(小)值、四分位差、標準差，可以透過這些數值，查看資料的分散性。
  * 最大(小)值 : 數據中最大(小)的數值。
  * 範圍 : 數據中最大值與最小值的差。
  * 四分位差 : 數據中第三個四分位數和第一個四分位數的差值。
  * 標準差 :公式 $SD=\sqrt{\frac{1}{N}\sum_{i=1}^{N}(x_i-\mu)^2}$，其中 $\mu$ 是指平均值。
* 直方圖: 

  透過直方圖的觀察，可以看出是否呈現常態分佈，也可以一眼看出眾數、最大(小)值落在哪個區間。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/0020a32c-cf69-4097-bfeb-09be04144182)
* 方盒圖: 

  繪製盒方圖可以看出數據的離散程度，且也可以看出最大(小)值，及四分位差。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/625d4805-33ef-4c01-a2a8-4061c8c53f16)

### 散點圖和相關性分析
* 散點圖: 用在x y關係為相對(另一絕對)散部圖

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/9b4576d6-c7c4-4313-a624-0390d48aedf8)
* 相關性分析
  * 皮爾遜相關係數: 
    
    用於探討兩連續變數(X, Y)之間的線性相關，若兩變數之間的相關係數絕對值較大，則表示彼此相互共變的程度較大。
    
    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/da3a9bdd-3e69-4f2c-8c61-2103c0699417)
  * 斯皮爾曼相關係數: 

    衡量兩個變量的相關性的無母數指標，它利用單調函數評價兩個統計變量的相關性。若數據中沒有重複值，且當兩變量完全單調相關時，斯皮爾曼相關係數為+1或−1。

    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/bf2ad821-ea82-4ced-8d67-47b0b8d2dd1b)

### 缺失值處理
* 直接刪除該筆資料(不推薦): 適用資料較多缺失值較少，並且補值困難的數據集。
* 補值: 適用大多數狀況，但補值不夠精確容易導致資料的特徵被扭曲。
* 直接不使用該行: 在行數較多的時候可以選擇使用，通常用於行中有著大量缺失值的狀況，但會減少特徵數量，使用上仍需要注意。

### 異常值檢測
* 標準偏差法: 

  在統計中，如果數據分佈近似正態分佈，則約68％的數據值位於平均值的一個標準偏差內，而約95％的數據位於兩個標準偏差內，約99.7％的數據位於三個標準偏差內，對於數據點大於標準偏差的3倍，則這些數據點很可能是異常或離群值。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/29eff514-60ef-4e58-b907-ec08a37e1b16)
* 箱形圖: 

  箱形圖是通過分位數對數值數據進行圖形化描述。這是一種可視化異常值的非常簡單但有效的方法。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/88629cdf-0be3-4416-a35a-3ca2c9a50d49)
* DBScan檢測離群值: 

  DBScan是一種聚類算法，它將數據分成幾組。它也可以用作基於密度的異常檢測方法，可以處理一維或多維數據。其他聚類算法（例如k均值和層次聚類）也可以用於檢測離群值。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/49cdc034-168f-4c32-a93f-76c9841b5b66)
* IsolationForest檢測離群值: 

  是一種無監督的學習算法，屬於集成決策樹。此方法不同於所有以前的方法。先前的所有嘗試都試圖找到數據的正常區域，然後將超出此定義區域的任何內容識別為異常值。該算法適用於非常高維的數據集，並且被證明是檢測異常的非常有效的方法。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/96304f56-772e-4f04-9f23-d8b5d09dabe6)

### 分布擬合和核密度估計

    我們所希望看到的是數據的”機率密度函數”，但KDE是較為平滑的方法。我們可以把數據視為多個kernel結合的結果，多個kernel可以擬合出較為平滑的分布曲線。

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/7b010fc2-b225-4bc9-b0a8-cb23d3011d10)

![image](https://github.com/Tzuan1020/alg112a/assets/99935739/cd7b822d-8959-43e4-b0da-8eb2fc9db1d5)

其中K為核函數kernel (非負、積分為1、具有對稱性且符合機率密度之函數)，x_i為kernel中心，n為kernel的數量，h為bandwidth。因此其意義可解釋為所有kernel對單一x之貢獻之總和，但單一Kernel即為一機率密度函數，因此在總合後需要除以kernel總數，轉換回機率密度函數。

### 特徵工程

   特徵工程就是篩選特徵的工程，對原始的數據進行一系列的分析討論，從中選取重要的特徵，讓資料可以更好來呈現。
* 資料前處理
  * 缺失值填補

    資料有缺失值的時候，通常有兩種做法，一種是刪除該資料，大部分的時候，我們不會採取刪除資料，但當缺失值太多的時候，像是超過一半的值都消失了，可以考慮將整個特徵刪掉。第二種是將資料填滿，在這裡我們就只考慮第二種。

    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/6d7ab06d-5222-42cd-812d-f3dfb0a61b20)

    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/0bec8c28-9fdb-4f84-9575-a9733c2df7df)
  * 資料多餘

    有時資料會以字串的方式呈現，但對於分析來說這並不好處理，例如，再填入性別質料的時候，我們會輸入男和女，可是其實我們可以經過轉換，也可以代表同樣的意義，而在分析上會更方便，其他的例子像是月份、星期等，數值方式的呈現一定比字串來的好處理。

    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/1455a25e-1d97-4003-848a-798f434462c1)

    ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/0c995b45-dafc-4b06-b92c-d77d97029c13)
  * 標準化

    想要將兩個(以上)的特徵，一起比較，此時，不同單位造成很大的困擾，最好的方式就是要標準化處理，讓資料變成無單位，能一起分析。常見的標準化方式分為兩種，min-max標準化及Z-score標準化。
      * min-max標準化

        ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/721525ab-cf22-4fe1-8a75-9496ba056aa7)
      * Z-score標準化

    
        ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/1a1f7999-1149-4788-a025-ba1703d80946)

        ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/d0eae8a3-a607-418e-b542-a8e1279fddda)

* 特徵選取

  特徵選取核心的概念就是從原始的資料中挑選出具有鑑別能力且有效的特徵，使其集合達到最佳化，讓原始的數據變得更加有價值。
  * 過濾法
    
    用統計的技巧獲得的分數來進行特徵的選擇，像是卡方檢定、皮爾松相關係數，F分數檢驗。我們在這裡介紹卡方檢定。
  * 嵌入法
  * 包裝法

### 箱型圖和小提琴圖
* 箱形圖

  * 顯示一組數據位置和分散情況的統計圖，包含六個數據節點: 
    * 中位數(中心)
    * 延伸的最大(上邊緣)
    * 最小(下邊緣)
    * 上下四分位數(Q1、Q3 即quantile(0.25)
    * quantile(0.75))
    * outlier(離群值/異常值被定義爲小於Q1－1.5IQR或大於Q3+1.5IQR的值)
  * 優點:

    在比較不同的母體數據時可表現其差異，箱形圖的繪製依靠實際數據，不需要事先假定數據服從哪種分佈，沒有對數據作限制要求，只是真實直觀地表現數據形狀的本來面貌。
  * 缺點: 
   
    不能瞭解數據分佈是雙模還是多模。
* 小提琴圖

  除了箱形圖,還強化資料分佈與機率密度(Density,背景圖寬), 可展示多組資料，中間白色圓點則表示中位數,延伸的幼細黑線代表 95% 置信區間。
  * 優點:
    * 在資料量非常大時可以適用
    * 透過顏色變化展現類別變化
    * violinplot還有許多變化選項order(排序), split(切分)
    * 可以使用seaborn內的多維度catplot, 達到violinplot結合及FacetGrid grouping within additional categorical variables

      ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/9f744a97-b513-4339-b0fd-5ca6f1def5a5)
  * 缺點:

    一個圖包含較多訊息,視覺上較為干擾。
### 熱圖
* 用於顯示變數之間的相關性和模式
* 把各個 item 配對，依照影響權重上色

  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/b58dcf19-eb36-454d-b611-1cd5b041e190)

### 時間序列分析

如果數據具有時間順序性，則可以進行時間序列分析，包括趨勢分析、周期性分析等。
* 趨勢: 在時間序列中記錄的長期緩慢變化/方向。

  
  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/2e023a33-0109-4fdb-ab49-9515d7864a24)
* 季節性: 季節性是在固定時間內發生的時間序列中的迴圈模式。下面的時間序列顯示了季節性，在每個週期中，都處於底部和峰值，模式相似。

  
  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/ddcd1d5b-0f63-42b4-9cc8-7140764824a0)
* 時間序列分解: 時間序列分解是將時間序列分解為其組成部分的過程，即趨勢，季節性和殘差。

  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/9cc87c49-dc35-446f-b00e-cd49b194c257)
* 時間序列預測

  預測是基於歷史時間資料在以後時間上進一步預測資料點的過程，這可以使用統計模型來完成。
  * 自迴歸(AR)模型
  * 移動平均(MA)模型
  * 自迴歸移動平均(ARMA)模型
  * 自迴歸綜合移動平均(ARIMA)模型
  * 季節自迴歸綜合移動平均(SARIMA)模型
  * 帶有外源迴歸量的季節自迴歸綜合移動平均(SARIMAX)模型
  * 向量自迴歸(VAR)模型
  * 向量誤差校正(VECM)模型

  對於較大的資料集，使用以下提到的深度學習模型:
    * 多層感知器(MLP)
    * 迴圈神經網路(RNN)
    * 長短期記憶網路(LSTM)
    * 自迴歸LSTMs
    * 卷積神經網路(CNN)
* Naïve預測與基線模型

  基線模型是使用naïve對時間序列資料進行預測構建的最簡單的模型。作為比較其他預測模型的基線。以下假設可用於建立基線模型:
  * 未來值與時間序列中的最後一個數據點相同
  * 未來值與某一時期內的值的中位數/眾數相同
  * 未來的值等於一定時期內的平均值
  * 未來的值與一定時期內的所有值相同
* 錯誤指標

  準確預測的目的是最小化資料中預測值與實際值之間的差距。所以有各種錯誤指標用於監視和最小化這種差距。
  * 均方誤差 (MSE)
  * 平均絕對誤差 (MAE)
  * 均方根誤差 (RMSE)
  * 平均絕對百分比誤差 (MAPE)
* 自相關

  是對時間序列中由不同時間步長隔開的值之間線性關係的度量。滯後是分隔兩個值的時間步數。自相關函式(ACF)圖用於測試時間序列中的值是否隨機分佈或彼此相關(如果時間序列具有趨勢)。

  
  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/f772b201-8036-4a90-a5e7-2bb4b947c8f9)

  
  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/ff766e11-4a29-4ce5-9dd7-7806aa6f6c49)

  這裡的x軸上的值表示滯後，y軸上的值表示由滯後分隔的不同值之間的相關性。

  如果y軸上的任何值位於圖的藍色陰影區域，則該值在統計上不顯著，比如下面的ACF圖顯示其值之間沒有相關性(除了第一個與自身相關的值)。

  ![image](https://github.com/Tzuan1020/alg112a/assets/99935739/38a964a1-3430-41a0-8a33-584d29fcd3ca)

// 這份期中報告是透過GPT初步了解EDA相關算法後，根據所列出的點再自行搜尋更詳細的資料，經閱讀理解後擷取以下網頁重點所整理而成。

### 參考資料
* https://medium.com/@tobby168/%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92%E9%A6%AC%E6%8B%89%E6%9D%BE-%E4%B8%80-eda-%E6%A8%99%E6%BA%96%E5%8C%96-%E7%9B%B8%E9%97%9C%E4%BF%82%E6%95%B8-kde-%E9%9B%A2%E6%95%A3%E5%8C%96-4cf9de9b239c
* https://ithelp.ithome.com.tw/articles/10234743
* https://ithelp.ithome.com.tw/articles/10260955
* https://www.yongxi-stat.com/pearson-correlation/
* https://medium.com/quantstreet/%E8%B3%87%E6%96%99%E8%99%95%E7%90%86-eda-outlier-fb6c8f9118c6
* https://jianjiesun.medium.com/dl-ml%E7%AD%86%E8%A8%98-%E5%85%AD-kernel-density-estimation-%E6%A0%B8%E5%AF%86%E5%BA%A6%E4%BC%B0%E8%A8%88-e14628159e6e
* https://ithelp.ithome.com.tw/articles/10234965
* https://yilishih.medium.com/%E6%A9%9F%E5%99%A8%E5%AD%B8%E7%BF%92-eda-%E7%AE%B1%E5%BD%A2%E5%9C%96-box-plot-vs-%E5%B0%8F%E6%8F%90%E7%90%B4%E5%9C%96-violin-plot-495c2ee98d5e
* https://allaboutdataanalysis.medium.com/20%E5%80%8B%E6%99%82%E9%96%93%E5%BA%8F%E5%88%97%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-%E5%AD%B8%E6%9C%83%E5%B9%AB%E4%BD%A0%E5%81%9A%E5%A5%BD%E9%A0%90%E6%B8%AC%E5%88%86%E6%9E%90-c297c631b374
